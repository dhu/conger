<?xml version="1.0"?>
<!DOCTYPE borealis SYSTEM "/home/jj/Workspace/borealis_summer_2008/borealis/src/src/borealis.dtd">

<!-- Borealis query diagram for:  stock.cc -->

<borealis>
    <input   stream="packet"     schema="PacketTuple"     />
    <output  stream="aggregate"  schema="AggregateTuple"  />

    <schema name="PacketTuple">
        <field  name="time"        type="int" />
        <field  name="price"    type="double" />
    </schema>

    <schema name="AggregateTuple">
        <field  name="time"        type="int" />
        <field  name="maxprice"       type="double" />
        <field  name="currenttime"       type="int" />
    </schema>

    <box name="mybox"   type="aggregate" >
        <in   stream="packet"    />
        <out  stream="aggregate" />

        <parameter   name="aggregate-function.0"  value="max(price)"  />
        <parameter   name="aggregate-function-output-name.0"
                    value="maxprice"  />
                    
        <parameter   name="aggregate-function.1"  value="max(time)"  />
        <parameter   name="aggregate-function-output-name.1"
                    value="currenttime"  />

        <parameter   name="window-size-by"        value="VALUES"   />
        <parameter   name="window-size"           value="180"        />
        <parameter   name="advance"               value="10"        />
        <parameter   name="order-by"              value="FIELD"    />
        <parameter   name="order-on-field"        value="time"     />
    </box>
</borealis>
